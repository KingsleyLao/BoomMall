<extend name='Public/base' />
<block name='title'>
	<title>商品添加</title>
</block>

<block name='style'>
	<link rel="stylesheet" type="text/css" href="__PUBLIC__/css/dropzone.css">
	<link href="__PUBLIC__/css/H-ui.min.css" rel="stylesheet" type="text/css" />
	<link href="__PUBLIC__/css/H-ui.admin.css" rel="stylesheet" type="text/css" />
	<link href="__PUBLIC__/lib/icheck/icheck.css" rel="stylesheet" type="text/css" />
	<link href="__PUBLIC__/lib/Hui-iconfont/1.0.1/iconfont.css" rel="stylesheet" type="text/css" />
	<link href="__PUBLIC__/lib/webuploader/0.1.5/webuploader.css" rel="stylesheet" type="text/css" />
</block>

<block name='main'>
	<div class="pd-20">
	<form action="{:U('Goods/add')}" method="post" class="form form-horizontal" id="form-article-add">

		<div class="row cl">
			<label class="form-label col-2"><span class="c-red">*</span>分类栏目：</label>
			<div class="formControls col-2"> <span class="select-box">
				<select name="typeid" class="select">
				<option value="">--请选择--</option>
				<foreach name='data' item='vo'>
					<option value="{$vo.id}">{$vo.newName}</option>
				</foreach>
				</select>
				</span> 
			</div>
		</div>

		<div class="row cl">
			<label class="form-label col-2"><span class="c-red">*</span>品牌：</label>
			<div class="formControls col-2"> <span class="select-box">
				<select name="brand" class="select">
					<option value="0">牌子</option>
					<foreach name='brand' item='vo'>
						<option value="{$vo.id}">{$vo.bname}</option>
					</foreach>
				</select>
				</span> 
			</div>	
		</div>

		<div class="row cl">
			<label class="form-label col-2"><span class="c-red">*</span>产品标题：</label>
			<div class="formControls col-10">
				<input type="text" class="input-text" value="" placeholder="" id="" name="goodsname">
			</div>
		</div>
		
		<div class="row cl">
			<label class="form-label col-2">产品规格：</label>
			<div class="formControls col-10" style="margin-bottom:10px">
				<div class="formControls col-2">
					<span class="select-box">
						<select name="size[]" class="select">
							<option value="">--请选择--</option>
							<option value="S">S</option>
							<option value="M">M</option>
							<option value="L">L</option>
							<option value="XL">XL</option>	
						</select>
					</span> 
				</div>

				<div class="formControls col-2">
					<span class="select-box">
						<select name="color[]" class="select">
							<option value="">--请选择--</option>
							<option value="黄色">黄色</option>
							<option value="红色">红色</option>
							<option value="蓝色">蓝色</option>
							<option value="绿色">绿色</option>
							<option value="白色">白色</option>
						</select>
					</span> 
				</div>
				
				<label class="form-label col-2">产品库存：</label>
				<input type="text" name="store[]" id="" placeholder="商品库存" value="" class="input-text" style=" width:25%">

				<a  class="b btn btn-default">多个规格</a>
			</div>
		</div>

		<div class="row cl">
			<label class="form-label col-2">产地：</label>
			<div class="formControls col-10">
				<input type="text" name="makein" id="" placeholder="" value="" class="input-text">
			</div>
		</div> 

		<div class="row cl">
			<label class="form-label col-2">是否促销：</label>
			<div class="formControls col-10">
				<input type="radio" value="1" name="ispro" checked>是
				<input type="radio" value="0" name="ispro">否
			</div>
		</div> 

		<div class="row cl">
			<label class="form-label col-2">状态</label>
			<div class="formControls col-4"> <span class="select-box">
				<select class="select" name="state">
					<option>--请选择--</option>
					<option value="1">上架</option>
					<option value="2">下架</option>
					
				</select>
				</span> 
			</div>		
		</div>

		<div class="row cl">
			<label class="form-label col-2">产品展示价格：</label>
			<div class="formControls col-4">
				<input type="text" name="price" id="" placeholder="" value="" class="input-text" style="width:90%">
				元/件</div>
			
		</div>
	
	<!-- 	<div class="row cl">
			<label class="form-label col-2">上架时间：</label>
			<div class="formControls col-4">
				<input type="text" onfocus="WdatePicker({dateFmt:'yyyy-MM-dd HH:mm:ss',maxDate:'#F{$dp.$D(\'datemax\')||\'%y-%M-%d\'}'})" id="datemin" class="input-text Wdate" style="width:180px;" name="onmarket">
			</div>
		</div> -->
	
		<div class="row cl">
			<label class="form-label col-2">产品摘要：</label>
			<div class="formControls col-10">
				<textarea name="desc" cols="" rows="" class="textarea"  placeholder="说点什么...最少输入10个字符" datatype="*10-100" dragonfly="true" nullmsg="备注不能为空！" onKeyUp="textarealength(this,200)">mememmedadad</textarea>
				<p class="textarea-numberbar"><em class="textarea-length">0</em>/200</p>
			</div>
		</div>
		
		 <div class="row cl">
			<label class="form-label col-2">图片上传：</label>
			<div class="formControls col-10">
				<div class="uploader-list-container">	
              		<div class="dropzone" style="width:50% height:200"></div>
				</div>
			</div>
		</div>

		 <div class="row cl">
			<label class="form-label col-2">详细内容：</label>
			<div class="formControls col-10"> 
				<textarea id="editor" type="text/plain" style="width:100%;height:400px;">hahahaha</textarea> 
			</div>
		</div> 

		 <div class="row cl">
			<div class="col-10 col-offset-2">
				<button  class="btn btn-primary radius" type="submit"><i class="Hui-iconfont">&#xe632;</i>添加</button>
				
				<button  class="btn btn-default radius" type="reset">&nbsp;&nbsp;取消&nbsp;&nbsp;</button>
			</div>
		</div> 
	</form>
</div>
</block>

<block name='script'>
<script type="text/javascript" src="__PUBLIC__/lib/jquery/1.9.1/jquery.min.js"></script> 
<script type="text/javascript" src="__PUBLIC__/lib/layer/1.9.3/layer.js"></script> 
<script type="text/javascript" src="__PUBLIC__/lib/My97DatePicker/WdatePicker.js"></script> 
<script type="text/javascript" src="__PUBLIC__/lib/icheck/jquery.icheck.min.js"></script> 
<script type="text/javascript" src="__PUBLIC__/lib/Validform/5.3.2/Validform.min.js"></script>
<script type="text/javascript" src="__PUBLIC__/lib/webuploader/0.1.5/webuploader.min.js"></script> 
<script type="text/javascript" src="__PUBLIC__/lib/ueditor/1.4.3/ueditor.config.js"></script>
<script type="text/javascript" src="__PUBLIC__/lib/ueditor/1.4.3/ueditor.all.min.js"></script>
<script type="text/javascript" src="__PUBLIC__/lib/ueditor/1.4.3/lang/zh-cn/zh-cn.js"></script>
<script type="text/javascript" src="__PUBLIC__/js/H-ui.js"></script> 
<script type="text/javascript" src="__PUBLIC__/js/H-ui.admin.js"></script> 
<script type="text/javascript" src="__PUBLIC__/js/dropzone.js"></script>
<script type="text/javascript" src="__PUBLIC__/dropzone/dropzone.min.js"></script>
<script type="text/javascript">

	         Dropzone.autoDiscover = false;//防止报"Dropzone already attached."的错误
            $(".dropzone").dropzone({

                //使用哪个方法来上传
                url: "__URL__/upload/",

                //是否可以删除
                addRemoveLinks: true,

                //删除的按钮样子
                dictRemoveLinks: "x",


                dictCancelUpload: "x",

                //<input type="file" name="userImg">
                paramName:"userImg",

                //最大可以上传多少张
                maxFiles: 10,

                //每张图片大小
                maxFilesize: 5,

                //允许上传的类型
                acceptedFiles: "image/*",
                init: function() {

                    //res为服务器响应回来的数据
                    //下面的函数是当上传图片成功后触发
                    this.on("success", function(file, res) {

                        //将json字符串转换成json对象
                        var obj = JSON.parse(res);

                        console.log(obj);
                        
                        if( obj.status == 200 ){

                            //将服务器得到的数据生成一个隐藏域。做商品添加的时候就可以获取到了
                            // var input = '<input type="hidden" name="'+obj.details.savename+'" value="'+obj.details.savepath+obj.details.savename+'" />';
                            // $('.myform').append(input);

                        var input = '<input type="hidden" name="img[]" value="'+obj.details.savepath+obj.details.savename+'" />';
                        $('.form').append(input);


                        }else{
                            alert('上传失败');
                        }
                    });
                    this.on("removedfile", function(file) {
                        console.log("File " + file.name + "removed");
                    });
            }
    });

$(function(){
	var ue = UE.getEditor('editor');
});

$('.b').click(function(){
	$(this).parent().after('<div class="row cl"><label class="form-label col-2">产品规格：</label><div class="formControls col-10"><div class="formControls col-2"><span class="select-box"><select name="size[]" class="select"><option value="">--请选择--</option><option value="S">S</option><option value="M">M</option><option value="L">L</option><option value="XL">XL</option></select></span></div><div class="formControls col-2"><span class="select-box"><select name="color[]" class="select"><option value="">--请选择--</option><option value="黄色">黄色</option><option value="红色">红色</option><option value="蓝色">蓝色</option><option value="绿色">绿色</option><option value="白色">白色</option></select></span></div><label class="form-label col-2">产品库存：</label><input type="text" name="store[]" id="" placeholder="商品库存" value="" class="input-text" style=" width:25%"><a class="b btn btn-default">多个规格</a></div></div>');
});
</script>
</block>

